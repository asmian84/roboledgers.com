/* Global Reset for Standards Mode */
*,
*::before,
*::after {
    box-sizing: border-box;
}

:root {
    /* Typography */
    --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-scale: 1.0;

    /* Color Palette */
    --primary-hue: 230;
    --primary-sat: 85%;
    --primary-light: 55%;

    --primary-color: hsl(var(--primary-hue), var(--primary-sat), var(--primary-light));
    --primary-dark: hsl(var(--primary-hue), var(--primary-sat), 45%);
    --primary-light: hsl(var(--primary-hue), var(--primary-sat), 65%);

    --secondary-color: hsl(280, 70%, 60%);
    --accent-color: hsl(160, 75%, 50%);
    --warning-color: hsl(38, 92%, 50%);
    --error-color: hsl(0, 72%, 55%);
    --success-color: hsl(142, 71%, 45%);

    /* Neutral Colors */
    --bg-primary: hsl(220, 18%, 12%);
    --bg-secondary: hsl(220, 18%, 16%);
    --bg-tertiary: hsl(220, 18%, 20%);
    --bg-elevated: hsl(220, 18%, 24%);

    --text-primary: hsl(0, 0%, 95%);
    --text-secondary: hsl(0, 0%, 70%);
    --text-tertiary: hsl(0, 0%, 50%);

    --border-color: hsl(220, 18%, 28%);
    --border-light: hsl(220, 18%, 32%);

    /* Glassmorphism */
    --glass-bg: rgba(255, 255, 255, 0.05);
    --glass-border: rgba(255, 255, 255, 0.1);
    --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);

    /* Spacing */
    --spacing-xs: 0.5rem;
    --spacing-sm: 1rem;
    --spacing-md: 1.5rem;
    --spacing-lg: 2rem;
    --spacing-xl: 3rem;

    /* Border Radius */
    --radius-sm: 6px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 24px;

    /* Transitions */
    --transition-fast: 150ms ease;
    --transition-normal: 250ms ease;
    --transition-slow: 400ms ease;

    /* Shadows */
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.15);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.2);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.3);
    --shadow-xl: 0 12px 48px rgba(0, 0, 0, 0.4);
}

/* Light Theme */
[data-theme="light"] {
    --bg-primary: #f8f9fa;
    --bg-secondary: #ffffff;
    --bg-tertiary: #e9ecef;
    --bg-elevated: #f1f3f5;

    --text-primary: #212529;
    --text-secondary: #495057;
    --text-tertiary: #6c757d;

    --border-color: #dee2e6;
    --border-light: #e9ecef;

    --glass-bg: rgba(255, 255, 255, 0.7);
    --glass-border: rgba(0, 0, 0, 0.1);

    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

/* Futuristic Themes */

/* Theme 1: Cyber Night (Default Dark - Enhanced) */
[data-theme="cyber-night"],
[data-theme="dark"] {
    --bg-primary: #0a0e1a;
    --bg-secondary: #131825;
    --bg-tertiary: #1a2033;
    --bg-elevated: #212942;

    --text-primary: #e8f4f8;
    --text-secondary: #b0c4d4;
    --text-tertiary: #7a8fa5;

    --primary-color: #00d4ff;
    --primary-dark: #00a8cc;
    --secondary-color: #7b2cbf;

    --accent-color: #00d4ff;
    --success-color: #00ff88;
    --warning-color: #ffa500;
    --error-color: #ff4757;

    --border-color: #2a3548;
    --border-light: #364152;

    --glass-bg: rgba(19, 24, 37, 0.6);
    --glass-border: rgba(0, 212, 255, 0.15);

    --glow-color: rgba(0, 212, 255, 0.3);
}

/* Theme 2: Arctic Dawn (Light - Enhanced) */
[data-theme="arctic-dawn"] {
    --bg-primary: #f0f4f8;
    --bg-secondary: #ffffff;
    --bg-tertiary: #d9e2ec;
    --bg-elevated: #f1f3f5;

    --text-primary: #102a43;
    --text-secondary: #334e68;
    --text-tertiary: #627d98;

    --primary-color: #0077cc;
    --primary-dark: #005fa3;
    --secondary-color: #4fc3f7;

    --accent-color: #0077cc;
    --success-color: #00b894;
    --warning-color: #fdcb6e;
    --error-color: #d63031;

    --border-color: #bcccdc;
    --border-light: #d9e2ec;

    --glass-bg: rgba(255, 255, 255, 0.7);
    --glass-border: rgba(0, 119, 204, 0.2);

    --glow-color: rgba(0, 119, 204, 0.15);
}

/* Theme 3: Neon Forest */
[data-theme="neon-forest"] {
    --bg-primary: #0d1f12;
    --bg-secondary: #162b1a;
    --bg-tertiary: #1f3a28;
    --bg-elevated: #284936;

    --text-primary: #e8fff3;
    --text-secondary: #b0f0d0;
    --text-tertiary: #7ac9a5;

    --primary-color: #00ff88;
    --primary-dark: #00cc6a;
    --secondary-color: #00ffaa;

    --accent-color: #00ff88;
    --success-color: #00ff88;
    --warning-color: #ffeb3b;
    --error-color: #ff5252;

    --border-color: #2d4f38;
    --border-light: #3a6047;

    --glass-bg: rgba(22, 43, 26, 0.6);
    --glass-border: rgba(0, 255, 136, 0.15);

    --glow-color: rgba(0, 255, 136, 0.3);
}

/* Theme 4: Royal Amethyst */
[data-theme="royal-amethyst"] {
    --bg-primary: #1a0d2e;
    --bg-secondary: #261541;
    --bg-tertiary: #331d54;
    --bg-elevated: #402567;

    --text-primary: #f3e5f5;
    --text-secondary: #d1b3e0;
    --text-tertiary: #a67fc1;

    --primary-color: #b565d8;
    --primary-dark: #9544b8;
    --secondary-color: #8b5cf6;

    --accent-color: #b565d8;
    --success-color: #7cb342;
    --warning-color: #ffb300;
    --error-color: #e91e63;

    --border-color: #4a2f67;
    --border-light: #5a3d7a;

    --glass-bg: rgba(38, 21, 65, 0.6);
    --glass-border: rgba(181, 101, 216, 0.15);

    --glow-color: rgba(181, 101, 216, 0.3);
}

/* Theme 5: Sunset Horizon */
[data-theme="sunset-horizon"] {
    --bg-primary: #2d1810;
    --bg-secondary: #3d2318;
    --bg-tertiary: #4d2f20;
    --bg-elevated: #5d3b28;

    --text-primary: #fff8f0;
    --text-secondary: #ffd9c0;
    --text-tertiary: #ffb88c;

    --primary-color: #ff6b35;
    --primary-dark: #d85525;
    --secondary-color: #f7931e;

    --accent-color: #ff6b35;
    --success-color: #81c784;
    --warning-color: #ffd54f;
    --error-color: #e57373;

    --border-color: #6d4a38;
    --border-light: #7d5a48;

    --glass-bg: rgba(61, 35, 24, 0.6);
    --glass-border: rgba(255, 107, 53, 0.15);

    --glow-color: rgba(255, 107, 53, 0.3);
}

/* Ocean Depths Theme - Deep blue/teal */
body.ocean-depths {
    --primary-color: #0ea5e9;
    --secondary-color: #06b6d4;
    --accent-color: #14b8a6;
    --bg-primary: #0c1821;
    --bg-secondary: #101e2b;
    --bg-tertiary: #143040;
    --text-primary: #f0f9ff;
    --text-secondary: #bae6fd;
    --text-tertiary: #7dd3fc;
    --border-color: #1e3a4f;
    --glass-bg: rgba(14, 165, 233, 0.05);
    --glass-border: rgba(14, 165, 233, 0.2);
    --shadow-sm: 0 1px 2px rgba(6, 182, 212, 0.1);
    --shadow-md: 0 4px 6px rgba(6, 182, 212, 0.1);
    --shadow-lg: 0 10px 15px rgba(6, 182, 212, 0.2);
}


* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: var(--font-family);
    font-size: calc(16px * var(--font-scale));
    background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
    color: var(--text-primary);
    height: 100vh;
    max-height: 100vh;
    line-height: 1.6;
    overflow: hidden;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Scrollbar Styling */
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-track {
    background: var(--bg-secondary);
}

::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--border-light);
}

/* App Layout - Sidebar Refactor */
.app-container {
    height: 100vh;
    display: flex;
    flex-direction: row;
    /* Horizontal layout */
    overflow: hidden;
}

/* Sidebar Styles */
.app-sidebar {
    width: 260px;
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border-right: 1px solid var(--glass-border);
    display: flex;
    flex-direction: column;
    padding: 1.5rem;
    flex-shrink: 0;
    transition: transform var(--transition-normal);
    z-index: 100;
}

.sidebar-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-light);
}

.sidebar-header h2 {
    font-size: 1.25rem;
    font-weight: 700;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.nav-group {
    margin-bottom: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.nav-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    color: var(--text-tertiary);
    font-weight: 600;
    margin-bottom: 0.5rem;
    letter-spacing: 0.05em;
}

.nav-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    border: none;
    background: transparent;
    color: var(--text-secondary);
    font-size: 0.95rem;
    cursor: pointer;
    border-radius: var(--radius-md);
    transition: all var(--transition-fast);
    text-align: left;
    width: 100%;
}

.nav-item:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.nav-item.active {
    background: linear-gradient(90deg, rgba(var(--primary-color), 0.1), transparent);
    background: var(--bg-elevated);
    color: var(--primary-color);
    font-weight: 600;
    border-left: 3px solid var(--primary-color);
}

.nav-item i {
    width: 20px;
    text-align: center;
}

.sidebar-footer {
    margin-top: auto;
    padding-top: 1rem;
    border-top: 1px solid var(--border-light);
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.nav-item-footer {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    border-radius: var(--radius-md);
    cursor: pointer;
    border: none;
    background: transparent;
    color: var(--text-secondary);
    width: 100%;
    text-align: left;
}

.nav-item-footer:hover {
    background: var(--bg-tertiary);
}

.user-profile-btn {
    margin-top: 0.5rem;
    padding: 0.5rem;
}

.avatar-circle {
    width: 32px;
    height: 32px;
    background: var(--primary-color);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.8rem;
}

.user-info-mini {
    display: flex;
    flex-direction: column;
    line-height: 1.2;
}

.user-info-mini .name {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
}

.user-info-mini .role {
    font-size: 0.75rem;
    color: var(--success-color);
}

/* Main Content Adjustments */
.main-content {
    flex: 1;
    height: 100vh;
    overflow-y: auto;
    padding: 2rem;
    background: transparent;
    /* Let body gradient show roughly */
}

/* Mobile Header (Hidden on Desktop) */
.mobile-header {
    display: none;
    align-items: center;
    gap: 1rem;
    margin-bottom: 2rem;
}

.section {
    display: none;
    animation: fadeIn 0.3s ease;
}

.section.active {
    display: block;
}

@media (max-width: 768px) {
    .app-container {
        flex-direction: column;
    }

    .app-sidebar {
        display: none;
        /* Mobile menu logic needed later */
        width: 100%;
        height: auto;
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Upload Section */
.upload-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: center;
    padding: 0.5rem 0;
    margin-top: 2rem;
}

.upload-zone {
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border: 2px dashed var(--glass-border);
    border-radius: var(--radius-xl);
    padding: 1.5rem;
    width: 100%;
    max-width: 450px;
    margin: 0 auto;
    /* Centering Fix */
    text-align: center;
    cursor: pointer;
    transition: all var(--transition-normal);
    position: relative;
    overflow: hidden;
}

.upload-zone::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    opacity: 0;
    transition: opacity var(--transition-normal);
}

.upload-zone:hover {
    border-color: var(--primary-color);
    box-shadow: 0 0 30px rgba(99, 102, 241, 0.2);
    transform: translateY(-2px);
}

.upload-zone:hover::before {
    opacity: 0.05;
}

.upload-zone.dragging {
    border-color: var(--accent-color);
    background: rgba(16, 185, 129, 0.05);
    transform: scale(1.02);
}

.upload-icon {
    margin: 0 auto var(--spacing-md);
}

.upload-icon svg {
    width: 48px;
    height: 48px;
    color: var(--primary-color);
}

@keyframes float {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-10px);
    }
}

.upload-zone h2 {
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
    font-weight: 600;
}

.upload-subtitle {
    color: var(--text-secondary);
    font-size: 1rem;
    margin-bottom: var(--spacing-md);
}

.upload-hint {
    color: var(--text-tertiary);
    font-size: 0.875rem;
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    display: inline-block;
}

/* File Explorer */
.file-explorer-container {
    width: 100%;
    max-width: 600px;
    /* Match upload zone width */
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    padding: 1rem;
    margin-top: 1.5rem;
    height: auto;
    max-height: 300px;
    /* Cap height if list gets long */
    display: none;
    /* Default hidden, managed by JS */
    flex-direction: column;
}

.file-explorer-header {
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--glass-border);
}

.file-explorer-header h3 {
    font-size: 0.95rem;
    color: var(--text-secondary);
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.file-list {
    list-style: none;
    overflow-y: auto;
    flex: 1;
    padding-right: 0.5rem;
}

.file-item {
    display: flex;
    align-items: center;
    padding: 0.75rem;
    background: rgba(255, 255, 255, 0.02);
    border-radius: 8px;
    margin-bottom: 0.5rem;
    transition: all 0.2s;
    border: 1px solid transparent;
}

.file-item:hover {
    background: rgba(255, 255, 255, 0.05);
    border-color: var(--glass-border);
}

.file-icon {
    font-size: 1.2rem;
    margin-right: 1rem;
    opacity: 0.7;
}

.file-details {
    flex: 1;
    overflow: hidden;
}

.file-name {
    font-size: 0.9rem;
    color: var(--text-primary);
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.file-name.editing {
    border: 1px solid var(--primary-color);
    background: var(--bg-primary);
    color: var(--text-primary);
    padding: 2px 4px;
    border-radius: 4px;
    outline: none;
}

.file-meta {
    font-size: 0.75rem;
    color: var(--text-tertiary);
    margin-top: 2px;
}

.file-actions {
    display: flex;
    gap: 0.5rem;
    opacity: 0;
    /* Hidden by default */
    transition: opacity 0.2s;
}

.file-item:hover .file-actions {
    opacity: 1;
}

.btn-action {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    transition: all 0.2s;
}

.btn-action:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
}

.btn-delete:hover {
    color: #ef4444;
    background: rgba(239, 68, 68, 0.1);
}

.btn-load:hover {
    color: #3b82f6;
    background: rgba(59, 130, 246, 0.1);
}

.empty-state {
    text-align: center;
    padding: 2rem;
    color: var(--text-tertiary);
    font-style: italic;
    font-size: 0.9rem;
}

/* Scrollbar for list */
.file-list::-webkit-scrollbar {
    width: 6px;
}

.file-list::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
}

/* Processing Section */
.processing-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 60vh;
    text-align: center;
}

.processing-spinner {
    margin-bottom: var(--spacing-xl);
}

.spinner {
    width: 80px;
    height: 80px;
    border: 4px solid var(--border-color);
    border-top-color: var(--primary-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

.processing-container h2 {
    font-size: 2rem;
    margin-bottom: var(--spacing-sm);
}

.processing-details {
    color: var(--text-secondary);
    font-size: 1rem;
    margin-bottom: var(--spacing-lg);
}

.progress-bar {
    width: 100%;
    max-width: 400px;
    height: 6px;
    background: var(--bg-tertiary);
    border-radius: 3px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    width: 0%;
    transition: width var(--transition-normal);
    animation: shimmer 2s infinite;
}

@keyframes shimmer {
    0% {
        background-position: -100% 0;
    }

    100% {
        background-position: 100% 0;
    }
}

/* Review Section */
.review-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: var(--spacing-lg);
    padding: var(--spacing-lg);
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    position: sticky;
    top: 0;
    z-index: 50;
}

.review-title-center {
    text-align: center;
    margin-bottom: var(--spacing-md);
    width: 100%;
}

.review-title-center h2 {
    font-size: 1.75rem;
    margin: 0 0 0.5rem 0;
}

.review-title-center .review-stats {
    color: var(--text-secondary);
    font-size: 0.875rem;
    margin: 0;
}

.review-title h2 {
    font-size: 1.75rem;
    margin-bottom: var(--spacing-xs);
}

.review-stats {
    color: var(--text-secondary);
    font-size: 0.875rem;
}

.review-actions-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-sm);
    width: 100%;
}

.review-buttons {
    display: flex;
    gap: var(--spacing-sm);
    justify-content: center;
    flex-wrap: wrap;
}

.grid-container {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    box-shadow: var(--shadow-md);
    width: 100%;
    overflow: hidden;
}

#transactionGrid {
    min-height: 500px;
    height: 600px;
    width: 100%;
}

.summary-panel {
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
}

.summary-card h3 {
    font-size: 1.25rem;
    margin-bottom: var(--spacing-md);
    color: var(--primary-color);
}

.trial-balance {
    display: grid;
    gap: var(--spacing-sm);
}

.balance-row {
    display: flex;
    justify-content: space-between;
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
}

.balance-row.total {
    background: var(--primary-color);
    color: white;
    font-weight: 600;
}

/* Buttons */
.btn-primary,
.btn-secondary {
    padding: var(--spacing-sm) var(--spacing-md);
    border: none;
    border-radius: var(--radius-md);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-xs);
    transition: all var(--transition-fast);
    font-family: inherit;
    white-space: nowrap;
}

.btn-primary {
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    color: white;
    box-shadow: var(--shadow-sm);
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-secondary {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
}

.btn-secondary:hover {
    background: var(--bg-elevated);
    border-color: var(--border-light);
}

.btn-icon {
    padding: var(--spacing-sm);
    border: none;
    background: transparent;
    color: var(--text-primary);
    border-radius: var(--radius-md);
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
    width: 40px;
    height: 40px;
}

.btn-icon:hover {
    background: var(--bg-tertiary);
}

.btn-icon svg {
    width: 20px;
    height: 20px;
}

.btn-primary svg,
.btn-secondary svg {
    width: 18px;
    height: 18px;
}

/* Modals */
.modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(10px);
    z-index: 2000;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-lg);
}

/* Settings modal should be below other modals */
#settingsModal {
    z-index: 1500 !important;
}

.modal.active {
    display: flex;
    animation: fadeIn var(--transition-normal);
}

.modal-content {
    background: var(--bg-secondary);
    border-radius: var(--radius-xl);
    border: 1px solid var(--border-color);
    max-width: 600px;
    width: 100%;
    max-height: 90vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    box-shadow: var(--shadow-xl);
    animation: slideUp var(--transition-normal);
}

.modal-large {
    max-width: 1000px;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--border-color);
}

.modal-header h2 {
    font-size: 1.5rem;
}

.modal-close {
    background: none;
    border: none;
    font-size: 2rem;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
}

.modal-close:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.modal-body {
    padding: var(--spacing-lg);
    overflow-y: hidden;
}

.vendor-controls {
    display: flex;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.export-description {
    color: var(--text-secondary);
    margin-bottom: var(--spacing-lg);
}

.export-options {
    display: grid;
    gap: var(--spacing-md);
}

.export-option-card {
    background: var(--glass-bg);
    border: 2px solid var(--glass-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
    cursor: pointer;
    transition: all var(--transition-normal);
    text-align: left;
    width: 100%;
}

.export-option-card:hover {
    border-color: var(--primary-color);
    background: rgba(99, 102, 241, 0.05);
    transform: translateX(4px);
}

.export-icon {
    font-size: 2.5rem;
    margin-bottom: var(--spacing-sm);
}

.export-option-card h3 {
    font-size: 1.25rem;
    margin-bottom: var(--spacing-xs);
}

.export-option-card p {
    color: var(--text-secondary);
    font-size: 0.875rem;
}

/* Status Toggle Switch */
.status-toggle {
    position: relative;
    display: inline-block;
    width: 44px;
    height: 24px;
}

.status-toggle input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--border-color);
    transition: .3s;
    border-radius: 24px;
}

.toggle-slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: .3s;
    border-radius: 50%;
}

input:checked+.toggle-slider {
    background-color: var(--success-color);
}

input:checked+.toggle-slider:before {
    transform: translateX(20px);
}

.status-toggle:hover .toggle-slider {
    box-shadow: 0 0 4px rgba(0, 0, 0, 0.2);
}

/* AG Grid Customization */
.ag-theme-alpine {
    --ag-background-color: var(--bg-secondary);
    --ag-foreground-color: var(--text-primary);
    --ag-header-background-color: var(--bg-tertiary);
    --ag-odd-row-background-color: rgba(255, 255, 255, 0.02);
    --ag-border-color: var(--border-color);
    --ag-row-hover-color: rgba(99, 102, 241, 0.1);
    --ag-selected-row-background-color: rgba(99, 102, 241, 0.15);
}

/* Responsive Design */
@media (max-width: 768px) {
    .app-header {
        padding: var(--spacing-sm) var(--spacing-md);
    }

    .main-content {
        padding: var(--spacing-md);
    }

    .review-header {
        flex-direction: column;
        gap: var(--spacing-md);
        align-items: stretch;
    }

    .review-actions {
        flex-direction: column;
    }

    .upload-info {
        grid-template-columns: 1fr;
    }

    .header-actions {
        flex-direction: column;
    }
}

/* Bulk Indexing Styles */
.bulk-index-info {
    background: var(--bg-tertiary);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
    margin-bottom: var(--spacing-lg);
    border: 1px solid var(--border-color);
}

.bulk-index-info h3 {
    font-size: 1.25rem;
    margin-bottom: var(--spacing-sm);
    color: var(--primary-color);
}

.bulk-index-info p {
    color: var(--text-secondary);
    margin-bottom: var(--spacing-md);
}

.bulk-index-info ul {
    list-style: none;
    padding-left: 0;
    margin-bottom: var(--spacing-md);
}

.bulk-index-info li {
    padding: var(--spacing-xs) 0;
    color: var(--text-secondary);
}

.bulk-index-info li::before {
    content: "âœ“ ";
    color: var(--success-color);
    font-weight: bold;
    margin-right: var(--spacing-xs);
}

.bulk-upload-zone {
    background: var(--glass-bg);
    border: 2px dashed var(--glass-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-xl);
    text-align: center;
    cursor: pointer;
    transition: all var(--transition-normal);
    margin-bottom: var(--spacing-md);
}

.bulk-upload-zone:hover {
    border-color: var(--primary-color);
    background: rgba(99, 102, 241, 0.05);
}

.bulk-upload-zone p {
    margin: 0;
    color: var(--text-primary);
}

#bulkProgress {
    margin-top: var(--spacing-md);
}

#bulkProgressText {
    color: var(--text-secondary);
    margin-bottom: var(--spacing-sm);
}

#bulkResults {
    background: var(--bg-elevated);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-top: var(--spacing-md);
}

#bulkResults h4 {
    color: var(--success-color);
    margin-bottom: var(--spacing-sm);
}

#bulkResults ul {
    list-style: none;
    padding-left: 0;
}

#bulkResults li {
    padding: var(--spacing-xs) 0;
    color: var(--text-secondary);
}

/* Grid Toolbar */
.grid-toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-md);
    background: var(--bg-tertiary);
    border-radius: var(--radius-md) var(--radius-md) 0 0;
    border: 1px solid var(--border-color);
    border-bottom: none;
    margin-bottom: 0;
}

.toolbar-left {
    display: flex;
    gap: var(--spacing-sm);
    flex: 1;
}

.toolbar-right {
    display: flex;
    gap: var(--spacing-xs);
}

.toolbar-search {
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-family: inherit;
    font-size: 0.875rem;
    width: 300px;
    transition: all var(--transition-fast);
}

.toolbar-search:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
}

/* Column Manager */
.column-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.column-item {
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    transition: background var(--transition-fast);
}

.column-item:hover {
    background: var(--bg-elevated);
}

.column-item label {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    cursor: pointer;
    user-select: none;
}

.column-item input[type="checkbox"] {
    cursor: pointer;
}

/* Reconciliation Panel */
.reconciliation-panel {
    margin-top: var(--spacing-lg);
    padding: var(--spacing-lg);
    background: var(--bg-secondary);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
}

.reconciliation-panel h3 {
    margin: 0 0 var(--spacing-lg) 0;
    color: var(--text-primary);
    font-size: 1.25rem;
}

.reconciliation-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--spacing-lg);
}

.reconciliation-section {
    padding: var(--spacing-md);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-md);
}

.reconciliation-section h4 {
    margin: 0 0 var(--spacing-md) 0;
    color: var(--text-secondary);
    font-size: 1rem;
    font-weight: 600;
}

.reconciliation-input-group {
    margin-bottom: var(--spacing-sm);
}

.reconciliation-input-group label {
    display: block;
    margin-bottom: var(--spacing-xs);
    color: var(--text-secondary);
    font-size: 0.875rem;
}

.reconciliation-input-group input {
    width: 100%;
    padding: var(--spacing-sm);
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-family: inherit;
    font-size: 1rem;
}

.reconciliation-input-group input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
}

.reconciliation-value {
    margin-top: var(--spacing-md);
    padding: var(--spacing-sm);
    background: var(--bg-primary);
    border-radius: var(--radius-sm);
}

.reconciliation-value label {
    display: block;
    margin-bottom: var(--spacing-xs);
    color: var(--text-tertiary);
    font-size: 0.75rem;
    text-transform: uppercase;
}

.calculated-value {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
}

.reconciliation-status {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.status-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-sm);
    background: var(--bg-primary);
    border-radius: var(--radius-sm);
}

.status-item label {
    color: var(--text-secondary);
    font-size: 0.875rem;
}

.discrepancy-value {
    font-weight: 600;
    font-size: 1.1rem;
}

.discrepancy-value.balanced {
    color: var(--success-color);
}

.discrepancy-value.warning {
    color: var(--warning-color);
}

.discrepancy-value.error {
    color: var(--error-color);
}

.status-indicator {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    background: var(--bg-primary);
    border-radius: var(--radius-sm);
    margin-top: var(--spacing-sm);
}

.status-icon {
    font-size: 1.5rem;
}

.status-text {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

/* Enhanced UI Borders and Separation */
.card,
.summary-card,
.info-card {
    border: 1px solid var(--border-light);
}



.btn-primary,
.btn-secondary {
    border: 1px solid transparent;
}

.btn-primary {
    border-color: rgba(99, 102, 241, 0.3);
}

.btn-secondary {
    border-color: var(--border-color);
}

.upload-zone {
    border: 2px dashed var(--border-color);
}

.upload-zone.drag-over {
    border-color: var(--primary-color);
    border-style: solid;
}

input[type="text"],
input[type="number"],
input[type="date"],
input[type="email"],
select,
textarea {
    border: 1.5px solid var(--border-color);
}

input:focus,
select:focus,
textarea:focus {
    border-color: var(--primary-color);
    outline: none;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.section {
    border-bottom: 1px solid var(--border-light);
}

.review-header {
    border-bottom: 2px solid var(--border-color);
}

/* Light theme enhancements */
[data-theme="light"] .card,
[data-theme="light"] .summary-card {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .btn-secondary {
    background: #ffffff;
    border-color: #d1d5db;
}

[data-theme="light"] .btn-secondary:hover {
    background: #f9fafb;
    border-color: #9ca3af;
}

/* Theme Picker Styling */
.theme-picker {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: var(--spacing-sm);
    margin-top: var(--spacing-sm);
}

.theme-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--spacing-sm);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition-normal);
    background: var(--bg-tertiary);
}

.theme-option:hover {
    border-color: var(--primary-color);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.theme-option.active {
    border-color: var(--primary-color);
    background: var(--bg-elevated);
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
}

.theme-preview {
    width: 100%;
    height: 60px;
    border-radius: var(--radius-sm);
    margin-bottom: var(--spacing-xs);
    box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.2);
}

.theme-name {
    font-weight: 600;
    font-size: 0.875rem;
    color: var(--text-primary);
    margin-bottom: 2px;
}

.theme-desc {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

/* Toolbar Layout Fix */
.search-controls {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-top: 0.75rem;
    flex-wrap: nowrap;
    /* Force one line */
    width: 100%;
}

.search-controls .input-group,
.search-controls div {
    margin: 0;
    /* Remove default margins that might cause wrap */
}



/* Theme Radio Buttons - Tight Wrap (3 in space of 2) */
.theme-radio-group {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.75rem;
    margin-top: 0.5rem;
    max-width: 66%;
    /* Constraint for tighter look */
}

.theme-radio-option {
    to {
        transform: translateY(0);
        opacity: 1;
    }
}



/* Settings Tabs */
.settings-tabs {
    position: sticky;
    top: 0;
    z-index: 100;
    background: var(--bg-secondary);
    display: flex;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    border-bottom: 2px solid var(--border-color);
    padding-top: var(--spacing-sm);
}

.settings-tab {
    padding: var(--spacing-sm) var(--spacing-lg);
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
    border-bottom: 2px solid transparent;
    margin-bottom: -2px;
}

.settings-tab:hover {
    color: var(--text-primary);
    background: var(--bg-elevated);
}

.settings-tab.active {
    color: var(--primary-color);
    border-bottom-color: var(--primary-color);
}

/* Settings Rows & Columns */
.settings-row {
    display: flex;
    gap: var(--spacing-md);
}

.settings-col-half {
    flex: 1;
}

/* Theme Preview Large */
.theme-preview-large {
    width: 100%;
    height: 100px;
    border-radius: var(--radius-md);
    margin-top: var(--spacing-sm);
    transition: background 0.3s ease;
    box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.2),
        0 4px 12px rgba(0, 0, 0, 0.1);
    position: relative;
    overflow: hidden;
}

.theme-preview-large::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg,
            transparent 0%,
            rgba(255, 255, 255, 0.08) 50%,
            transparent 100%);
}

/* Settings Panels */
.settings-panel {
    display: none;
}

.settings-panel.active {
    display: block;
}

.settings-panel[data-panel="data"] {
    padding-top: 2rem;
}

.settings-panel h3 {
    font-size: 1.25rem;
    margin: 0 0 var(--spacing-lg) 0;
    color: var(--text-primary);
}

.settings-panel h4 {
    font-size: 1rem;
    margin: 0 0 var(--spacing-sm) 0;
    color: var(--text-primary);
    font-weight: 600;
}

/* Settings Section & Label */
.settings-section {
    display: block;
    margin-bottom: 2rem;
}

.settings-section:last-child {
    margin-bottom: 0;
}

.settings-label {
    display: block;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 1rem;
}

/* Modular Settings Buttons */
.settings-btn {
    width: 100%;
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
}

.settings-btn-secondary {
    background: var(--surface-color);
    color: var(--text-color);
    border: 1px solid var(--border-color);
}

.settings-btn-secondary:hover {
    background: var(--hover-bg);
    border-color: var(--primary-color);
    transform: translateY(-1px);
}

.settings-btn-primary {
    background: var(--primary-color);
    color: #fff;
}

.settings-btn-primary:hover {
    background: var(--primary-hover);
    transform: translateY(-1px);
}

/* Input Fields */
.settings-select,
.settings-input {
    width: 100%;
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-family: inherit;
    font-size: 1rem;
    transition: all var(--transition-fast);
}

.settings-select:focus,
.settings-input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.settings-input::placeholder {
    color: var(--text-tertiary);
}

/* Sleek Theme Cards */
.theme-picker {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--spacing-md);
    margin-top: var(--spacing-md);
}

.theme-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--spacing-md);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.3s var(--transition-smooth);
    background: var(--bg-primary);
}

.theme-option:hover {
    border-color: var(--primary-color);
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15),
        0 0 0 4px rgba(var(--accent-rgb), 0.1);
}

.theme-option.active {
    border-color: var(--primary-color);
    background: var(--bg-elevated);
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.3),
        0 8px 24px rgba(0, 0, 0, 0.2);
    transform: scale(1.05);
}

.theme-preview {
    width: 100%;
    height: 80px;
    border-radius: var(--radius-sm);
    margin-bottom: var(--spacing-sm);
    box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.2),
        0 4px 12px rgba(0, 0, 0, 0.1);
    position: relative;
    overflow: hidden;
}

.theme-preview::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg,
            transparent 0%,
            rgba(255, 255, 255, 0.1) 50%,
            transparent 100%);
}

.theme-name {
    font-weight: 600;
    font-size: 0.9375rem;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.theme-desc {
    font-size: 0.75rem;
    color: var(--text-tertiary);
}


/* Button Group */
.button-group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.account-select {
    transition: all var(--transition-fast);
}

.account-select:hover {
    border-color: var(--primary);
    background: var(--bg-tertiary);
}

.account-select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.account-select option {
    background: var(--bg-primary);
    color: var(--text-primary);
    padding: 0.5rem;
}

/* Accounts List */
.accounts-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-top: 1rem;
}

.account-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
}

.account-item-info {
    flex: 1;
}

.account-item-name {
    font-weight: 600;
    color: var(--text-primary);
}

.account-item-details {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.account-item-actions {
    display: flex;
    gap: 0.5rem;
}

.accounts-toolbar {
    margin-bottom: 1rem;
}

/* Theme Radio Buttons */
.theme-radio-group {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.75rem;
    margin-top: 0.5rem;
    max-width: 66%;
    /* Fits 3 in the space of 2 per user request */
}

.theme-radio-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0.75rem 0.5rem;
    background: var(--glass-bg);
    border: 2px solid var(--glass-border);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition);
    text-align: center;
}

.theme-radio-option:hover {
    border-color: var(--primary-color);
    background: rgba(99, 102, 241, 0.05);
    transform: translateY(-2px);
}

.theme-radio-option input[type="radio"] {
    margin-bottom: 0.5rem;
    width: 18px;
    height: 18px;
    accent-color: var(--primary-color);
    cursor: pointer;
}

.theme-radio-option input[type="radio"]:checked~.theme-content {
    color: var(--primary-color);
}

.theme-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
    transition: all var(--transition);
}

.theme-icon {
    font-size: 1.75rem;
}

.theme-name {
    font-size: 0.8rem;
    font-weight: 500;
    line-height: 1.2;
}

/* --- AG Grid Flash Animation Overrides --- */
/* Ensure the data change flash is Green (Success) instead of default opacity fade */

/* Dark Theme Flash */
.ag-theme-alpine-dark .ag-cell-data-changed {
    background-color: rgba(16, 185, 129, 0.4) !important;
    /* Green with opacity */
}

/* Light Theme Flash */
.ag-theme-alpine .ag-cell-data-changed {
    background-color: rgba(16, 185, 129, 0.4) !important;
}

/* Ensure animation works smoothly */
.ag-theme-alpine-dark .ag-cell-data-changed-animation,
.ag-theme-alpine .ag-cell-data-changed-animation {
    background-color: transparent;
    transition: background-color 1s;
}


/* AG Grid Floating Filter Customization */
/* 3. Filter Inputs - Flat, Clean, Minimal */
.ag-theme-alpine .ag-floating-filter-input {
    height: 26px !important;
    line-height: normal !important;
    margin-top: 4px !important;
    /* Vertical centering */
    border-radius: 4px !important;
    border: 1px solid #e5e7eb !important;
    /* Ultra-thin light gray */
    background-color: #ffffff !important;
    /* Clean white background */
    color: #1f2937 !important;
    /* Dark text */
    padding: 0 8px !important;
    width: 95% !important;
    box-shadow: none !important;
}

/* Active State for Inputs */
.ag-theme-alpine .ag-floating-filter-input:focus {
    border-color: var(--primary-color) !important;
    box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.2) !important;
}

.ag-header-cell-menu-button {
    color: var(--text-secondary) !important;
}

.ag-header-cell-menu-button:hover {
    color: var(--primary-color) !important;
}

.ag-floating-filter-input::placeholder {
    color: var(--text-tertiary) !important;
    opacity: 0.7;
}

.ag-header-row-floating-filter {
    background: var(--bg-secondary) !important;
}

.ag-floating-filter-button {
    display: none !important;
}


:root {
    --input-bg: var(--bg-tertiary);
}


/* Fix: Soften filter borders */
.ag-floating-filter-input {
    border-color: var(--border-light) !important;
    border-width: 1px !important;
}


/* AG Grid Cell Editor Styling - Clean and Centered */
.ag-cell-inline-editing,
.ag-cell-editor input,
.ag-cell-editor textarea {
    color: var(--text-primary) !important;
    background: var(--bg-elevated) !important;
    border: 1px solid var(--primary-color) !important;
    border-radius: var(--radius-sm) !important;
    padding: 0.5rem !important;
    text-align: center !important;
    font-family: var(--font-family) !important;
    font-size: 14px !important;
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1) !important;
}

.ag-cell-inline-editing input:focus,
.ag-cell-editor input:focus,
.ag-cell-editor textarea:focus {
    outline: none !important;
    border-color: var(--primary-light) !important;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2) !important;
}

/* Remove harsh borders from cells when editing */
.ag-cell-inline-editing {
    border: none !important;
    padding: 0 !important;
}

/* Center text in editable cells */
.ag-cell-edit-input {
    text-align: center !important;
}

/* AG GRID INPUT STYLING - TARGETED & SAFE */

/* 1. Cell Editors (When typing in a cell) */
.ag-theme-alpine .ag-cell-inline-editing,
.ag-theme-alpine .ag-cell-editor,
.ag-theme-alpine .ag-cell input,
.ag-theme-alpine .ag-cell select {
    background-color: var(--bg-tertiary) !important;
    color: var(--text-primary) !important;
    font-family: var(--font-family);
    font-size: 14px;
    height: 100% !important;
    line-height: normal;
    border: none !important;
    /* Let AG Grid handle focus border */
    border-radius: 0 !important;
    box-shadow: none !important;
    padding: 0 8px !important;
}

/* 2. Floating Filters (The search boxes in headers) */
.ag-theme-alpine .ag-header-row .ag-floating-filter-input {
    background-color: var(--bg-tertiary) !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--border-light) !important;
    border-radius: 4px !important;
    height: 24px !important;
    /* Explicit small height for header */
    line-height: normal !important;
    margin-top: 0 !important;
    width: 100% !important;
    padding: 0 4px !important;
    box-shadow: none !important;
}

/* 3. Focus States */
.ag-theme-alpine .ag-cell-focus-within {
    border: 2px solid var(--primary-color) !important;
    z-index: 100;
    /* Ensure focus border sits on top */
}

/* 4. Global Inputs (Outside Grid) - Keep these separate */
input.currency-input,
#gridQuickFilter,
#refPrefixInput,
#accountTypeSelect,
.bulk-account-dropdown {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border-light);
    border-radius: 4px;
    padding: 6px 10px;
}

/* Grid Container Stability */
.grid-container {
    display: block;
    width: 100%;
    height: 600px;
    /* Explicit height to match grid */
    margin-bottom: 2rem;
}

/* Ensure no double borders in grid */
.ag-cell-focus,
.ag-cell {
    border: none !important;
}

/* RESTORE CLEAN GRID STYLES */

/* 1. Header Row - Standard Height */
.ag-theme-alpine .ag-header-row {
    height: 48px !important;
    border-bottom: 1px solid var(--border-color) !important;
}

.ag-theme-alpine .ag-cell select {
    background-color: var(--bg-elevated) !important;
    color: var(--text-primary) !important;
    font-family: var(--font-family);
    font-size: 14px;
    height: 100% !important;
    border: none !important;
    padding: 0 12px !important;
}

/* 5. Header Labels - Cntral alignment */
.ag-theme-alpine .ag-header-cell-label {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* FIXED GRID HEADER STYLES - LIGHT BLUE THEME */
/* User Request: "Very light blue... Text in Dark" */

/* 1. Main Header Container - Light Blue */
.ag-theme-alpine .ag-header {
    background-color: #f0f9ff !important;
    /* Sky-50 */
    border-bottom: 1px solid #bae6fd !important;
    /* Sky-200 */
}

/* 2. Header Rows - Inherit Background */
.ag-theme-alpine .ag-header-row {
    background-color: #f0f9ff !important;
    color: #0f172a !important;
    /* Slate-900 (Dark text) */
}

/* 3. Header Text - Dark, Bold & Centered */
.ag-theme-alpine .ag-header-cell-label {
    color: #0f172a !important;
    font-weight: 700 !important;
    /* Slightly bolder for visibility */
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

.ag-theme-alpine .ag-header-cell-text {
    color: #0f172a !important;
}

/* 4. Sort Icons - Force Dark Blue */
.ag-theme-alpine .ag-icon {
    color: #0369a1 !important;
    /* Sky-700 */
}

/* 5. Filter Inputs Container - Flexbox Centering (Robust) */
.ag-theme-alpine .ag-floating-filter-body {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    height: 100% !important;
}

/* 6. Filter Inputs - Force Light Grey & Clean */
/* Specificity Boost: Target input element directly within the theme and header */
.ag-theme-alpine .ag-header-row .ag-floating-filter-body input,
.ag-theme-alpine .ag-floating-filter-input,
.ag-theme-alpine input.ag-floating-filter-input {
    height: 24px !important;
    line-height: 24px !important;
    margin: 0 !important;
    border-radius: 4px !important;
    border: 1px solid #cbd5e1 !important;
    /* Slate-300 */
    background-color: #f8fafc !important;
    /* Very Light Grey (Slate-50) */
    color: #0f172a !important;
    /* Dark Slate Text (Force it) */
    padding: 0 8px !important;
    width: 90% !important;
    box-shadow: none !important;
    -webkit-appearance: none !important;
    /* Remove browser default styling */
    appearance: none !important;
}

.ag-theme-alpine .ag-header-row .ag-floating-filter-body input:focus,
.ag-theme-alpine .ag-floating-filter-input:focus {
    border-color: #0ea5e9 !important;
    /* Sky-500 */
    background-color: #ffffff !important;
    /* White on focus */
    box-shadow: 0 0 0 2px rgba(14, 165, 233, 0.2) !important;
    outline: none !important;
}

/* 7. Grid Container Border - Match Header */
.grid-container {
    border: 1px solid #bae6fd !important;
}

/* 8. Scrollbars - Light/Neutral */
.ag-body-vertical-scroll-viewport::-webkit-scrollbar-track,
.ag-body-horizontal-scroll-viewport::-webkit-scrollbar-track {
    background: #f1f5f9;
}

.ag-body-vertical-scroll-viewport::-webkit-scrollbar-thumb,
.ag-body-horizontal-scroll-viewport::-webkit-scrollbar-thumb {
    background-color: #cbd5e1;
    border-radius: 4px;
}

/* 6. Grid Container - Explicit Layout */
.grid-container {
    display: block;
    width: 100%;
    margin-bottom: 2rem;
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-color);
    /* Clean outer border */
}

/* CRITICAL: Force Dark Text for Pastel Rainbow Rows (Matches Popup) */
.ag-theme-alpine .ag-row {
    color: #1f2937 !important;
    /* Dark text for contrast against pastel backgrounds */
    font-weight: 500;
}

/* Ensure selected row looks good */
.ag-theme-alpine .ag-row-selected {
    border: 2px solid var(--primary-color) !important;
}

/* CRITICAL: RE-APPLY ROW TEXT COLOR (Overwritten by replacement) */
.ag-theme-alpine .ag-row {
    color: #1f2937 !important;
    font-weight: 500;
}

/* Checkbox Column - Light Grey Background (Independent of row color) */
.ag-theme-alpine .checkbox-cell {
    background-color: #f1f5f9 !important;
    /* Slate-100 (Solid opaque to hide row color) */
    border-right: none !important;
    /* Removed per user request */
}

/* =========================================
   VENDOR GRID OVERRIDES (Fix Dark Modal Issue)
   ========================================= */
#vendorGrid.ag-theme-alpine {
    /* Force Light Theme Background inside the Dark Modal */
    --ag-background-color: #ffffff !important;
    --ag-foreground-color: #0f172a !important;
    --ag-header-background-color: #f1f5f9 !important;
    /* Light Slate Header */
    --ag-header-foreground-color: #1e293b !important;
    --ag-row-hover-color: #e2e8f0 !important;
    --ag-odd-row-background-color: #f8fafc !important;
    --ag-border-color: #cbd5e1 !important;
    font-family: 'Inter', sans-serif !important;
}

#vendorGrid .ag-header-cell-text {
    color: #1e293b !important;
    font-weight: 600 !important;
}

#vendorGrid .ag-row {
    color: #334155 !important;
    /* Dark Slate Text */
    border-bottom: 1px solid #e2e8f0 !important;
}

/* Fix delete button in vendor grid */
#vendorGrid .delete-btn {
    color: #ef4444 !important;
    background: transparent !important;
    border: 1px solid #ef4444 !important;
    padding: 4px 8px !important;
    border-radius: 4px !important;
    cursor: pointer !important;
}

#vendorGrid .delete-btn:hover {
    background: #ef4444 !important;
    color: white !important;
}

/* =========================================
   MODAL LAYOUT FIXES
   ========================================= */

/* Constrain large modal width */
/* REMOVED .modal-content.large-modal to prevent conflict with super-modal.css resizing logic */

/* Ensure body takes up remaining space (for grid) ONLY in large/grid modals */
.large-modal .modal-body {
    flex: 1;
    overflow: auto;
    /* Let grid handle scroll */
    padding: 0 !important;
    /* Remove padding to let grid flush */
}

/* Ensure Chart of Accounts grid container fills modal */
.modal-content #accountsList {
    flex: 1;
    min-height: 0;
    overflow: auto;
}

/* Ensure grid fits perfectly */
#vendorGrid {
    height: 100% !important;
    width: 100% !important;
}

/* Adjust header actions spacing */
.header-actions {
    display: flex;
    gap: 12px;
    align-items: center;
}

/* Add Vendor Button Icon alignment */
#addVendorBtn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

/* --- Mini-Manager Popover --- */
#accountManagerPopover {
    position: absolute;
    background: var(--surface-bg, #1e293b);
    border: 1px solid var(--border-color, #334155);
    border-radius: 8px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    z-index: 1000;
    min-width: 250px;
    display: none;
    /* Hidden by default */
    padding: 0.75rem;
    font-size: 0.9rem;
    color: var(--text-primary, #fff);
}

.popover-arrow {
    position: absolute;
    top: -6px;
    left: 12px;
    width: 12px;
    height: 12px;
    background: var(--surface-bg, #1e293b);
    border-left: 1px solid var(--border-color, #334155);
    border-top: 1px solid var(--border-color, #334155);
    transform: rotate(45deg);
}

.popover-header {
    font-weight: 600;
    margin-bottom: 0.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-color, #334155);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.quick-add-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
    margin-bottom: 0.75rem;
}

.quick-add-btn {
    background: var(--input-bg, #0f172a);
    border: 1px solid var(--border-color, #334155);
    border-radius: 4px;
    color: var(--text-secondary, #94a3b8);
    font-size: 0.75rem;
    padding: 0.25rem;
    cursor: pointer;
    text-align: center;
    transition: all 0.2s;
}

.quick-add-btn:hover {
    background: var(--primary-color, #3b82f6);
    color: white;
    border-color: var(--primary-color, #3b82f6);
}

.account-list-mini {
    max-height: 200px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.account-item-mini {
    display: flex;
    align-items: center;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    cursor: pointer;
    gap: 0.5rem;
}

.account-item-mini:hover {
    background: var(--hover-bg, rgba(255, 255, 255, 0.05));
    color: var(--text-primary);
}

.account-item-mini span[contenteditable="true"] {
    border-bottom: 1px dashed var(--primary-color);
    outline: none;
    min-width: 50px;
}

.account-item-mini .delete-btn {
    margin-left: auto;
    opacity: 0;
    cursor: pointer;
    color: #ef4444;
}

.account-item-mini:hover .delete-btn {
    opacity: 1;
}

/* Reconciliation Panel Layout */
.reconciliation-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
    margin-top: 1rem;
}

.reconciliation-section {
    background: var(--bg-secondary);
    padding: 1rem;
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.reconciliation-section h4 {
    margin: 0 0 0.5rem 0;
    font-size: 0.85rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.reconciliation-input-group {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.reconciliation-input-group label {
    font-size: 0.75rem;
    color: var(--text-tertiary);
}

.reconciliation-value {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    font-size: 0.9rem;
}

.calculated-value {
    font-family: 'Roboto Mono', monospace;
    font-weight: 500;
}

.discrepancy-value {
    font-family: 'Roboto Mono', monospace;
    font-weight: 600;
}

.status-indicator {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: auto;
    padding-top: 0.5rem;
    border-top: 1px solid var(--border-color);
    font-size: 0.85rem;
}

/* Responsive adjustments */
@media (max-width: 1024px) {
    .reconciliation-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 640px) {
    .reconciliation-grid {
        grid-template-columns: 1fr;
    }
}

/* --- Sticky Header & Layout Fixes --- */
/* --- Sticky Header & Layout Fixes --- */
.sticky-header-wrapper {
    position: sticky;
    top: 0;
    z-index: 50;

    /* Glassmorphism Effect */
    background: color-mix(in srgb, var(--bg-primary), transparent 10%);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);

    padding-top: 1rem;
    padding-bottom: 1rem;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    margin-bottom: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    /* Subtle border for separation */
}

/* Remove old sticky from child if present */
.review-header {
    position: relative;
    top: auto;
    z-index: auto;
    box-shadow: none;
    border-bottom: none;
    /* Let wrapper handle it */
}

/* Ensure Parent Section allows sticky */
#reviewSection {
    overflow: visible;
    /* Required for sticky children */
}

/* Prevent Page Scroll by constraining Grid Height */
.grid-container {
    /* height: 600px;  <-- REMOVED to allow page scroll */
    /* overflow-y: auto; <-- REMOVED */
    height: 80vh;
    /* Give it substantial height but let page drive it if needed, or stick to auto */
    /* actually, if we want sticky header to work on PAGE scroll, the grid must push page content down. */
    height: auto;
    min-height: 500px;
    overflow: visible;

    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
}

/* User Profile Widget (Sidebar) */
.user-profile-widget {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    padding: 0.8rem;
    margin-top: 0.5rem;
    border-top: 1px solid var(--glass-border);
}

.logout-link {
    color: var(--accent-color);
    font-size: 0.85rem;
    text-decoration: none;
    font-weight: 500;
    cursor: pointer;
}

.logout-link:hover {
    text-decoration: underline;
}

/* Settings Page Styles */
.settings-page-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
}

.settings-grid-layout {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 1.5rem;
    margin-top: 1.5rem;
}

.settings-card {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    overflow: hidden;
}

.settings-card.full-width-card {
    grid-column: 1 / -1;
}

.card-header {
    padding: 1rem 1.5rem;
    background: rgba(255, 255, 255, 0.05);
    border-bottom: 1px solid var(--glass-border);
}

.card-header h3 {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 600;
}

.card-body {
    padding: 1.5rem;
}

.form-group {
    margin-bottom: 1rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
    color: var(--text-secondary);
}

.form-group small {
    display: block;
    margin-top: 0.4rem;
    color: var(--text-tertiary);
    font-size: 0.85rem;
}

.action-list {
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
}

.page-title {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 1rem;
    margin-left: 0.5rem;
}

/* Empty Transaction State */
.empty-state-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 60vh;
    text-align: center;
    background: var(--glass-bg);
    border-radius: var(--radius-lg);
    border: 1px dashed var(--border-color);
    margin: 2rem;
}

.empty-state-content {
    animation: fadeIn 0.5s ease-out;
}

.empty-icon {
    font-size: 4rem;
    margin-bottom: 1rem;
    opacity: 0.8;
}

.empty-state-content h2 {
    font-size: 1.5rem;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
}

.empty-subtitle {
    color: var(--text-secondary);
    margin-bottom: 2rem;
    font-size: 1.1rem;
}

/* State Toggling Utilities */
.state-empty #emptyTransactionState {
    display: flex !important;
}

.state-empty #reviewContent {
    display: none !important;
}

.state-has-data #emptyTransactionState {
    display: none !important;
}

.state-has-data #reviewContent {
    display: block !important;
}

/* Grid Table for Accounts */
.grid-table {
    width: 100%;
    border-collapse: collapse;
}

.grid-table th,
.grid-table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}

.grid-table th {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    font-weight: 600;
}

.grid-table tr:hover {
    background: var(--glass-bg);
}

/* File Explorer Items (Uploaded CSVs) */
.file-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-bottom: 0.5rem;
    transition: all 0.2s;
}

.file-item:hover {
    border-color: var(--primary-color);
    background: var(--bg-tertiary);
}

.file-info {
    display: flex;
    flex-direction: column;
}

.file-name {
    font-weight: 600;
    color: var(--text-primary);
}

.file-meta {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.file-actions {
    display: flex;
    gap: 8px;
}

.action-btn {
    width: 32px;
    height: 32px;
    border-radius: 6px;
    border: 1px solid var(--border-color);
    background: transparent;
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.action-btn:hover {
    background: var(--glass-bg);
    color: var(--text-primary);
    border-color: var(--text-secondary);
}

.edit-btn:hover {
    color: var(--primary-color);
    border-color: var(--primary-color);
}

.delete-btn:hover {
    color: var(--error-color);
    border-color: var(--error-color);
}

.restore-btn {
    width: auto;
    padding: 0 12px;
    font-size: 0.85rem;
    gap: 6px;
    background: var(--bg-primary);
}

.restore-btn:hover {
    background: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

/* --- Appearance Settings Overrides --- */

/* Text Case */
body.text-case-uppercase {
    text-transform: uppercase;
}

body.text-case-lowercase {
    text-transform: lowercase;
}

body.text-case-sentence {
    text-transform: none;
}

/* Grid Themes - AG Grid Overrides */

/* Vanilla (Clean/White) */
.grid-theme-vanilla .ag-root-wrapper,
.grid-theme-vanilla .ag-header {
    background-color: #ffffff !important;
    border-color: #e0e0e0 !important;
}

.grid-theme-vanilla .ag-row {
    background-color: #ffffff !important;
    color: #333 !important;
}

.grid-theme-vanilla .ag-row-odd {
    background-color: #f9f9f9 !important;
}

/* Classic (High Contrast / Serif headers maybe?) */
.grid-theme-classic .ag-header {
    background-color: #333 !important;
    color: #fff !important;
    font-family: 'Times New Roman', serif !important;
}

.grid-theme-classic .ag-cell {
    border-right: 1px solid #ccc !important;
}

/* Ledger Pad (Greenish) */
.grid-theme-ledger .ag-root-wrapper,
.grid-theme-ledger .ag-header,
.grid-theme-ledger .ag-body {
    background-color: #fcfce5 !important;
}

.grid-theme-ledger .ag-header-cell {
    border-right: 1px solid #dcdca3 !important;
    border-bottom: 2px solid #888 !important;
}

.grid-theme-ledger .ag-row {
    background-color: #fcfce5 !important;
    border-bottom: 1px solid #d4d4b0 !important;
}

/* Post-it Note (Yellow) */
.grid-theme-postit .ag-root-wrapper,
.grid-theme-postit .ag-header-viewport,
.grid-theme-postit .ag-body-viewport {
    background-color: #fff7d1 !important;
}

.grid-theme-postit .ag-row {
    background-color: #fff7d1 !important;
    font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif !important;
    /* Playful */
}

/* Rainbow (Colorful Headers) */
.grid-theme-rainbow .ag-header {
    background: linear-gradient(90deg, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%) !important;
    color: #333 !important;
}

.grid-theme-rainbow .ag-row:hover {
    background-color: #ffeef8 !important;
}

/* =========================================
   TEXT CASE SETTINGS (Scoped to Grid)
   ========================================= */

/* Uppercase */
body.text-case-uppercase .ag-center-cols-container .ag-cell-value,
body.text-case-uppercase .ag-header-cell-text {
    text-transform: uppercase !important;
}

/* Lowercase */
body.text-case-lowercase .ag-center-cols-container .ag-cell-value,
body.text-case-lowercase .ag-header-cell-text {
    text-transform: lowercase !important;
}

/* Sentence/Normal Case (Default) */
body.text-case-sentence .ag-center-cols-container .ag-cell-value,
body.text-case-sentence .ag-header-cell-text {
    text-transform: none !important;
}


/* =========================================
   THEME OVERRIDES (Lighten Intensity)
   ========================================= */

/* Theme 1: Cyber Day (Light Futuristic) */
[data-theme='cyber-night'],
[data-theme='dark'] {
    --bg-primary: #f8fafc;
    --bg-secondary: #ffffff;
    --bg-tertiary: #f1f5f9;
    --bg-elevated: #e2e8f0;
    --text-primary: #0f172a;
    --text-secondary: #475569;
    --text-tertiary: #94a3b8;
    --primary-color: #0ea5e9;
    --primary-dark: #0284c7;
    --secondary-color: #8b5cf6;
    --accent-color: #0ea5e9;
    --success-color: #10b981;
    --warning-color: #f59e0b;
    --error-color: #ef4444;
    --border-color: #cbd5e1;
    --border-light: #e2e8f0;
    --glass-bg: rgba(255, 255, 255, 0.8);
    --glass-border: rgba(14, 165, 233, 0.2);
    --glow-color: rgba(14, 165, 233, 0.15);
}

/* Theme 3: Mint Fresh */
[data-theme='neon-forest'] {
    --bg-primary: #f0fdf4;
    --bg-secondary: #ffffff;
    --bg-tertiary: #dcfce7;
    --bg-elevated: #bbf7d0;
    --text-primary: #064e3b;
    --text-secondary: #166534;
    --text-tertiary: #15803d;
    --primary-color: #16a34a;
    --primary-dark: #15803d;
    --secondary-color: #22c55e;
    --accent-color: #14b8a6;
    --success-color: #16a34a;
    --warning-color: #eab308;
    --error-color: #ef4444;
    --border-color: #86efac;
    --border-light: #bbf7d0;
    --glass-bg: rgba(255, 255, 255, 0.8);
    --glass-border: rgba(22, 163, 74, 0.2);
    --glow-color: rgba(22, 163, 74, 0.15);
}

/* Theme 4: Lavender Mist */
[data-theme='royal-amethyst'] {
    --bg-primary: #faf5ff;
    --bg-secondary: #ffffff;
    --bg-tertiary: #f3e8ff;
    --bg-elevated: #e9d5ff;
    --text-primary: #581c87;
    --text-secondary: #7e22ce;
    --text-tertiary: #9333ea;
    --primary-color: #9333ea;
    --primary-dark: #7e22ce;
    --secondary-color: #a855f7;
    --accent-color: #d946ef;
    --success-color: #4ade80;
    --warning-color: #fca5a5;
    --error-color: #f43f5e;
    --border-color: #d8b4fe;
    --border-light: #e9d5ff;
    --glass-bg: rgba(255, 255, 255, 0.8);
    --glass-border: rgba(147, 51, 234, 0.2);
    --glow-color: rgba(147, 51, 234, 0.15);
}

/* Theme 5: Peach Dawn */
[data-theme='sunset-horizon'] {
    --bg-primary: #fff7ed;
    --bg-secondary: #ffffff;
    --bg-tertiary: #ffedd5;
    --bg-elevated: #fed7aa;
    --text-primary: #7c2d12;
    --text-secondary: #c2410c;
    --text-tertiary: #ea580c;
    --primary-color: #f97316;
    --primary-dark: #ea580c;
    --secondary-color: #fb923c;
    --accent-color: #f43f5e;
    --success-color: #22c55e;
    --warning-color: #fcd34d;
    --error-color: #ef4444;
    --border-color: #fdba74;
    --border-light: #fed7aa;
    --glass-bg: rgba(255, 255, 255, 0.8);
    --glass-border: rgba(249, 115, 22, 0.2);
    --glow-color: rgba(249, 115, 22, 0.15);
}


/* =========================================
   SETTINGS SIDEBAR LAYOUT
   ========================================= */

.settings-layout {
    display: flex;
    height: calc(100vh - 80px);
    /* Fill remaining usage */
    gap: 0;
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    overflow: hidden;
    border: 1px solid var(--border-color);
}

.settings-sidebar {
    width: 250px;
    background: var(--bg-elevated);
    border-right: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
    padding: 1rem 0;
}

.settings-sidebar-header {
    padding: 0 1.5rem 1rem;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 1rem;
}

.settings-sidebar-header h2 {
    font-size: 1.25rem;
    margin: 0;
    color: var(--text-primary);
}

.settings-nav {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    padding: 0 0.75rem;
}

.settings-nav-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    background: transparent;
    border: none;
    border-radius: var(--radius-md);
    color: var(--text-secondary);
    text-align: left;
    font-size: 0.95rem;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.settings-nav-item:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.settings-nav-item.active {
    background: var(--primary-color);
    color: white;
    box-shadow: var(--shadow-sm);
}

.settings-nav-item i {
    width: 20px;
    text-align: center;
}

.settings-content {
    flex: 1;
    padding: 2rem;
    overflow-y: auto;
    background: var(--bg-primary);
}

.settings-panel {
    display: none;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.settings-panel.active {
    display: block;
    opacity: 1;
    animation: fadeIn 0.3s ease forwards;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(5px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}


/* --- Version Explorer --- */
.version-card {
    display: flex;
    align-items: center;
    padding: 1rem;
    background: white;
    border: 1px solid var(--border-color);
    border-radius: 12px;
    margin-bottom: 0.75rem;
    transition: all 0.2s ease;
}

.version-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    border-color: var(--primary-light);
}

.version-icon {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    background: #eff6ff;
    color: var(--primary);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    margin-right: 1rem;
}

.version-info {
    flex: 1;
}

.version-name {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.2rem;
    cursor: text;
}

.version-name:hover {
    text-decoration: underline;
    text-decoration-style: dotted;
}

.version-meta {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.version-actions {
    display: flex;
    gap: 0.5rem;
}

.btn-icon {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    border: none;
    background: transparent;
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.btn-restore:hover {
    background: #eff6ff;
    color: var(--primary);
}

.btn-delete:hover {
    background: #fef2f2;
    color: #ef4444;
}

.empty-state-small {
    text-align: center;
    padding: 2rem;
    color: var(--text-secondary);
    background: #f8fafc;
    border-radius: 12px;
    border: 1px dashed var(--border-color);
}

.empty-state-small i {
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
    display: block;
    opacity: 0.5;
}


/* Version Explorer Layout */
#versionExplorer {
    width: 100%;
    max-width: 600px;
    margin: 1rem auto;
    padding: 0 1rem;
}


/* --- Version Explorer (Refined List) --- */
.version-list-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    overflow: hidden;
    margin-top: 1rem;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.version-header {
    padding: 0.75rem 1rem;
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-color);
}

.version-header h4 {
    margin: 0;
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-secondary);
}

.version-row {
    display: flex;
    align-items: center;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--border-light);
    transition: background 0.2s;
}

.version-row:last-child {
    border-bottom: none;
}

.version-row:hover {
    background: var(--bg-primary);
}

.version-file-icon {
    color: var(--primary);
    margin-right: 0.75rem;
    font-size: 1.1rem;
}

.version-details {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.v-name {
    font-weight: 500;
    color: var(--text-primary);
}

.v-name-edit {
    display: none;
    padding: 2px 4px;
    font-size: 0.9rem;
    border: 1px solid var(--primary);
    border-radius: 4px;
}

.v-date {
    font-size: 0.8rem;
    color: var(--text-tertiary);
    margin-left: 0.5rem;
}

.version-actions {
    display: flex;
    gap: 0.25rem;
}

.btn-icon-action {
    width: 28px;
    height: 28px;
    border: none;
    background: transparent;
    border-radius: 4px;
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.btn-icon-action:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.btn-icon-action.delete:hover {
    color: #ef4444;
    background: #fef2f2;
}

.btn-icon-action.edit:hover {
    color: #f59e0b;
    background: #fffbeb;
}

/* --- Dashboard Hero --- */
.dashboard-hero {
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
    padding: 3rem 2rem;
    border-radius: 20px;
    margin-bottom: 2rem;
    border: 1px solid var(--border-color);
    text-align: center;
    position: relative;
    overflow: hidden;
}

.dashboard-hero h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
    background: linear-gradient(to right, var(--primary), var(--secondary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.dashboard-hero p {
    color: var(--text-secondary);
    font-size: 1.1rem;
    max-width: 600px;
    margin: 0 auto;
}

.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    padding: 0 1rem;
}

.feature-card {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: 16px;
    padding: 1.5rem;
    transition: all 0.3s;
    cursor: default;
}

.feature-card:hover {
    transform: translateY(-5px);
    border-color: var(--primary-light);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
}

.feature-icon {
    font-size: 2rem;
    margin-bottom: 1rem;
    display: inline-block;
    padding: 12px;
    background: var(--bg-tertiary);
    border-radius: 12px;
    color: var(--primary);
}

.feature-card h3 {
    margin-bottom: 0.5rem;
    font-size: 1.1rem;
}

.feature-card p {
    font-size: 0.9rem;
    color: var(--text-secondary);
    line-height: 1.5;
}


/* Dashboard Animations */
.slide-in {
    animation: slideInDown 0.6s ease-out forwards;
}

.fade-in-up {
    animation: fadeInUp 0.6s ease-out forwards;
    opacity: 0;
}

@keyframes slideInDown {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}


/* Version History Modal Styles */
.version-list-container {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.version-row-modal {
    display: flex;
    align-items: center;
    padding: 0.75rem;
    border-bottom: 1px solid var(--border-light);
    transition: background 0.2s;
}

.version-row-modal:last-child {
    border-bottom: none;
}

.version-row-modal:hover {
    background: var(--bg-tertiary);
    border-radius: 8px;
}

.v-icon-col {
    color: var(--primary);
    font-size: 1.25rem;
    margin-right: 1rem;
    width: 24px;
    text-align: center;
}

.v-info-col {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.v-main {
    display: flex;
    align-items: center;
}

.v-name {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.95rem;
}

.v-sub {
    font-size: 0.8rem;
    color: var(--text-tertiary);
    margin-top: 2px;
}

.v-actions-col {
    display: flex;
    gap: 0.5rem;
}

.empty-state-large {
    text-align: center;
    padding: 3rem;
    color: var(--text-tertiary);
}

.empty-state-large i {
    font-size: 3rem;
    margin-bottom: 1rem;
    opacity: 0.3;
}


/* Static Version Card (Like a Modal but Inline) */
.version-static-card {
    background: var(--bg-secondary);
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    border: 1px solid var(--border-color);
    margin: 1.5rem auto;
    max-width: 600px;
    width: 100%;
    overflow: hidden;
}

.v-card-header {
    background: var(--bg-tertiary);
    padding: 0.75rem 1.25rem;
    border-bottom: 1px solid var(--border-light);
}

.v-card-header h4 {
    margin: 0;
    text-transform: uppercase;
    font-size: 0.8rem;
    letter-spacing: 1px;
    color: var(--text-secondary);
}

.version-row-static {
    display: flex;
    align-items: center;
    padding: 0.75rem 1.25rem;
    border-bottom: 1px solid var(--border-light);
    background: var(--bg-secondary);
    transition: all 0.2s;
}

.version-row-static:last-child {
    border-bottom: none;
}

.version-row-static:hover {
    background: var(--bg-primary);
}

.empty-state-card {
    padding: 2rem;
    text-align: center;
    color: var(--text-tertiary);
}

.empty-state-card i {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
    opacity: 0.5;
}

/* Theme 6: Golden Hour (Warm Light) */
[data-theme="golden-hour"] {
    --bg-primary: #fffbeb;
    --bg-secondary: #ffffff;
    --bg-tertiary: #fef3c7;
    --bg-elevated: #fff7ed;

    --text-primary: #451a03;
    --text-secondary: #78350f;
    --text-tertiary: #92400e;

    --primary-color: #f59e0b;
    --primary-dark: #d97706;
    --secondary-color: #fcd34d;

    --accent-color: #f59e0b;
    --success-color: #059669;
    --warning-color: #d97706;
    --error-color: #dc2626;

    --border-color: #fde68a;
    --border-light: #fef3c7;

    --glass-bg: rgba(255, 255, 255, 0.6);
    --glass-border: rgba(245, 158, 11, 0.2);

    --glow-color: rgba(245, 158, 11, 0.2);
}

/* --- Home Page Redesign v2 (Clean & Expandable) --- */
.home-container {
    max-width: 900px;
    margin: 0 auto;
    padding-top: 1rem;
    animation: fadeInUp 0.5s ease-out;
}

.changelog-section {
    margin-top: 3rem;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
}

.changelog-header {
    padding: 1.5rem;
    border-bottom: 1px solid var(--border-color);
    background: var(--bg-secondary);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.changelog-header h3 {
    margin: 0;
    font-size: 1.1rem;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* Accordion Styles */
details.version-item {
    border-bottom: 1px solid var(--border-color);
    transition: background-color 0.2s;
}

details.version-item:last-child {
    border-bottom: none;
}

details.version-item[open] {
    background-color: var(--bg-tertiary);
}

summary.version-summary {
    padding: 1.25rem 1.5rem;
    cursor: pointer;
    list-style: none;
    /* Hide default triangle */
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 500;
    color: var(--text-primary);
    transition: color 0.2s;
}

summary.version-summary::-webkit-details-marker {
    display: none;
}

summary.version-summary:hover {
    color: var(--primary-color);
}

.version-tag {
    font-family: monospace;
    background: var(--bg-primary);
    padding: 0.25rem 0.6rem;
    border-radius: 4px;
    border: 1px solid var(--border-color);
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.version-date {
    font-size: 0.85rem;
    color: var(--text-tertiary);
    margin-left: auto;
    margin-right: 1rem;
}

.toggle-icon {
    font-size: 0.8rem;
    color: var(--text-tertiary);
    transition: transform 0.2s;
}

details[open] .toggle-icon {
    transform: rotate(180deg);
}

.version-content {
    padding: 1rem 1.5rem 1.5rem 1.5rem;
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
    font-size: 0.95rem;
    color: var(--text-secondary);
    line-height: 1.6;
}

.version-content ul {
    margin: 0;
    padding-left: 1.5rem;
}

.version-content li {
    margin-bottom: 0.5rem;
}

.gradient-text {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-weight: 800;
}

/* Forced Z-Index Stacking */
#VIGModal {
    z-index: 9000;
}

#VSMModal {
    z-index: 9050;
}